{"version":3,"sources":["../src/jsSwipeDetect.js"],"names":["JsSwipeDetect","options","_options","element","threshold","restraint","allowedTime","handleTouch","e","direction","phase","type","distance","_start","x","y","_end","_time","start","end","elapsed","_swipeType","init","document","querySelector","addEventTouch","_this","addEventListener","eventTouchStart","call","eventTouchMove","eventTouchEnd","touchObj","changedTouches","pageX","pageY","Date","getTime","preventDefault","getDirection","getAxis","Math","abs","isAxisX"],"mappings":"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","file":"jsSwipeDetect.js","sourcesContent":["\"use strict\";\r\n/**\r\n * jsSwipeDetection\r\n * Detection of swipe direction\r\n */\r\nclass JsSwipeDetect {\r\n    /**\r\n     * konstruktor\r\n     * @param {object} options nastaveni \r\n     */\r\n    constructor(options) {\r\n        console.log('creat construct');\r\n        this._options = Object.assign({}, {\r\n            element: '',\r\n            //nastaveni gesta\r\n            threshold: 150, //minimalni vzdalenost\r\n            restraint: 100, //omezeni\r\n            allowedTime: 800, // maximalni cas\r\n            //callback\r\n            handleTouch: (e, direction, phase, type, distance) => {}\r\n        }, options || {})\r\n\r\n        //pocatecni souradnice\r\n        this._start = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        //cilove souradnice\r\n        this._end = {\r\n            x: 0,\r\n            y: 0\r\n        }\r\n\r\n        //cas\r\n        this._time = {\r\n            start: 0, //pocatecni cas gesta\r\n            end: 0, //koncovy cas gesta\r\n            elapsed: 0 //delka trvani\r\n        }\r\n\r\n        this._swipeType = 'none';\r\n\r\n        this.init();\r\n    }\r\n\r\n    /**\r\n     * init\r\n     */\r\n    init() {\r\n        this.element = typeof this._options.element == 'object' ? this._options.element : document.querySelector(this._options.element);\r\n        this.addEventTouch();\r\n    }\r\n\r\n    /**\r\n     * pridani eventu pro touch\r\n     */\r\n    addEventTouch() {\r\n        let _this = this;\r\n        this.element.addEventListener('touchstart', (e) => {\r\n            this.eventTouchStart.call(this, e);\r\n        }, false);\r\n        this.element.addEventListener('touchmove', (e) => {\r\n            this.eventTouchMove.call(this, e);\r\n        }, false);\r\n        this.element.addEventListener('touchend', (e) => {\r\n            this.eventTouchEnd.call(this, e);\r\n        }, false);\r\n    }\r\n\r\n    /**\r\n     * touch start\r\n     * @param {object} e event\r\n     */\r\n    eventTouchStart(e) {\r\n        console.log('start');\r\n\r\n        //predam zmenu udalosti\r\n        let touchObj = e.changedTouches[0];\r\n\r\n        //reset swipeType\r\n        this._swipeType = 'none';\r\n\r\n        //nastavim pocatecni souradnice\r\n        this._start.x = touchObj.pageX;\r\n        this._start.y = touchObj.pageY;\r\n\r\n        //zacatek udalosti\r\n        this._time.start = new Date().getTime(); //nastavim pocatecni cas\r\n\r\n        console.log('start coordinates x:' + this._start.x + ', y:' + this._start.y);\r\n\r\n        //zavolam callback\r\n        this._options.handleTouch.call(this, e, 'none', 'start', this._swipeType, 0);\r\n\r\n        e.preventDefault()\r\n    }\r\n\r\n    /**\r\n     * touch move\r\n     * @param {object} e event\r\n     */\r\n    eventTouchMove(e) {\r\n        console.log('move');\r\n\r\n        //predam zmenu udalosti\r\n        let touchObj = e.changedTouches[0];\r\n\r\n        //vypocteme posun od pocatecniho bodu\r\n        this._end.x = touchObj.pageX - this._start.x;\r\n        this._end.y = touchObj.pageY - this._start.y;\r\n\r\n        console.log('move coordinates x:' + this._end.x + ', y:' + this._end.y);\r\n        console.log('direction:' + this.getDirection());\r\n        console.log('distance:' + this._end[this.getAxis()]);\r\n\r\n        this._options.handleTouch.call(this, e, this.getDirection(), 'move', this._swipeType, this._end[this.getAxis()]);\r\n    }\r\n\r\n    /**\r\n     * touch end\r\n     * @param {object} e event\r\n     */\r\n    eventTouchEnd(e) {\r\n        console.log('end');\r\n        \r\n        //predam zmenu udalosti\r\n        let touchObj = e.changedTouches[0];\r\n\r\n        //vypoctu delku eventu\r\n        this._time.end = new Date().getTime();\r\n        this._time.elapsed = this._time.end - this._time.start;\r\n\r\n        if (\r\n                this._time.elapsed === false || this._time.elapsed <= this._options.allowedTime //1) podminka pro detekci pohybu. Testuji zdali je delka gesta kratsinez nastaveny case nebo false a podminka se \r\n                && (\r\n                    Math.abs(this._end.x) >= this._options.threshold && Math.abs(this._end.y) <= this._options.restraint //2a) podminka pro horizontalní pretahovani\r\n                    || Math.abs(this._end.y) >= this._options.threshold && Math.abs(this._end.x) <= this._options.restraint //2b) podminka pro vertikalní pretahovani\r\n                )\r\n            ) {\r\n                this._swipeType = this.getDirection();\r\n            }\r\n\r\n        console.log('end coordinates x:' + this._end.x + ', y:' + this._end.y);\r\n        console.log('direction:' + this.getDirection());\r\n        console.log('swipe:' + this._swipeType);\r\n        console.log('distance:' + this._end[this.getAxis()]);\r\n\r\n        this._options.handleTouch.call(this, e, this.getDirection(), 'end', this._swipeType, this._end[this.getAxis()]);\r\n        e.preventDefault()\r\n    }\r\n\r\n    /**\r\n     * vrati TRUE pokud je posun po horizontalni ose X a FALSE pokud je posun po vertiklani ose Y\r\n     * @returns {bool} true: osa X, false: osa Y\r\n     */\r\n    isAxisX() {\r\n        //pokud je horizontalni vzdalenost vetsi nez vertikalni. Jedna se o hovrizontalni posun v ose X\r\n        return Math.abs(this._end.x) > Math.abs(this._end.y);\r\n    }\r\n\r\n    /**\r\n     * vrati nazev osy (x, y)\r\n     * @returns {string} x,y\r\n     */\r\n    getAxis() {\r\n        return this.isAxisX() ? 'x' : 'y';\r\n    }\r\n\r\n    /**\r\n     * vrati smer posunu (left, right, up, down)\r\n     * @returns {string}\r\n     */\r\n    getDirection() {\r\n        if(this.isAxisX()) {\r\n            return (this._end.x < 0) ? 'left' : 'right';\r\n        } else {\r\n            return (this._end.y < 0) ? 'up' : 'down';\r\n        }\r\n    }\r\n}"]}